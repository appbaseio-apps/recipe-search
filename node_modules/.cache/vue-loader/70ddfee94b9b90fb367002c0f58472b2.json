{"remainingRequest":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mohdashraf/Desktop/appbase-apps/recipes-search/src/components/FiltersRenderer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/src/components/FiltersRenderer.vue","mtime":1627887036333},{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/cache-loader/dist/cjs.js","mtime":1619552968369},{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/babel-loader/lib/index.js","mtime":1619520193948},{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/cache-loader/dist/cjs.js","mtime":1619552968369},{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/vue-loader/lib/index.js","mtime":1621975511869}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRmlsdGVyc1JlbmRlcmVyIiwKICBwcm9wczogewogICAgaXNNb2JpbGVWaWV3OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9LAogICAgfSwKICAgIGxvYWRpbmc6IEJvb2xlYW4sCiAgICBhZ2dyZWdhdGlvbkRhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0IHx8IEFycmF5LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfSwKICAgIH0sCiAgICB2YWx1ZTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0sCiAgICB9LAogICAgc2V0VmFsdWU6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygiUGxlYXNlIHByb3ZpZGUgYSBmdW5jdGlvbiIpOwogICAgICAgIH07CiAgICAgIH0sCiAgICB9LAogICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0FsbEZpbHRlcnM6IGZhbHNlLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEluZ3JlZGllbnRGaWx0ZXJBcnIoYWdncmVnYXRpb25EYXRhLCB2YWx1ZSkgewogICAgICAvKiBlc2xpbnQtZGlzYWJsZSBhcnJheS1jYWxsYmFjay1yZXR1cm4gKi8KICAgICAgY29uc3QgcmVzcG9uc2VWYWx1ZSA9IHZhbHVlCiAgICAgICAgPyB2YWx1ZS5tYXAoKGl0ZW0pID0+IGl0ZW0udG9Mb3dlckNhc2UoKSkKICAgICAgICA6IFtdOwogICAgICBjb25zdCBzb3J0ZWRGaWx0ZXJzID0gW107CiAgICAgIGFnZ3JlZ2F0aW9uRGF0YT8uZGF0YT8ubWFwKChpdGVtKSA9PiB7CiAgICAgICAgaWYgKCFyZXNwb25zZVZhbHVlLmluY2x1ZGVzKGl0ZW0uX2tleS50b0xvd2VyQ2FzZSgpKSkgewogICAgICAgICAgc29ydGVkRmlsdGVycy5wdXNoKGl0ZW0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzb3J0ZWRGaWx0ZXJzLnVuc2hpZnQoeyBpc0NoZWNrZWQ6IHRydWUsIC4uLml0ZW0gfSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHJldHVybiBzb3J0ZWRGaWx0ZXJzLnNsaWNlKAogICAgICAgIDAsCiAgICAgICAgTWF0aC5tYXgoCiAgICAgICAgICA3LAogICAgICAgICAgdGhpcy5zaG93QWxsRmlsdGVycyB8fCB0aGlzLmlzTW9iaWxlVmlldyA/IHNvcnRlZEZpbHRlcnMubGVuZ3RoIDogNwogICAgICAgICkKICAgICAgKTsKICAgICAgLyogZXNsaW50LWVuYWJsZSBhcnJheS1jYWxsYmFjay1yZXR1cm4gKi8KICAgIH0sCiAgICBoYW5kbGVGaWx0ZXJUb2dnbGUoY2hlY2tlZCwgdmFsdWUsIHNldFZhbHVlLCBpdGVtS2V5KSB7CiAgICAgIGxldCB2YWx1ZXMgPSB2YWx1ZSB8fCBbXTsKICAgICAgaWYgKCFjaGVja2VkKSB7CiAgICAgICAgdmFsdWVzID0gWy4uLnZhbHVlcy5maWx0ZXIoKHZhbHVlSXRlbSkgPT4gdmFsdWVJdGVtICE9PSBpdGVtS2V5KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWVzLnB1c2goaXRlbUtleSk7CiAgICAgIH0KICAgICAgLy8gU2V0IGZpbHRlciB2YWx1ZSBhbmQgdHJpZ2dlciBjdXN0b20gcXVlcnkKICAgICAgc2V0VmFsdWUodmFsdWVzLCB7CiAgICAgICAgdHJpZ2dlckRlZmF1bHRRdWVyeTogZmFsc2UsCiAgICAgICAgdHJpZ2dlckN1c3RvbVF1ZXJ5OiB0cnVlLAogICAgICAgIHN0YXRlQ2hhbmdlczogdHJ1ZSwKICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["FiltersRenderer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FiltersRenderer.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    :class=\"{\n      'filter-container': true,\n    }\"\n  >\n    <!-- Spinner placeholder for loading : true -->\n    <a-row v-if=\"loading\" justify=\"center\" type=\"flex\" :gutter=\"[24, 24]\"\n      ><a-col span=\"24\">\n        <a-spin :spinning=\"loading\" size=\"large\"></a-spin> </a-col\n    ></a-row>\n\n    <!-- template for result renderer -->\n    <template v-if=\"!loading\">\n      <template\n        v-for=\"(item, index) in getIngredientFilterArr(aggregationData, value)\"\n      >\n        <a-checkable-tag\n          :key=\"index\"\n          :checked=\"value ? value.includes(item._key) : false\"\n          @change=\"\n            (checked) => handleFilterToggle(checked, value, setValue, item._key)\n          \"\n        >\n          <a-icon v-if=\"!item.isChecked\" type=\"plus-circle\" />\n          <a-icon v-if=\"item.isChecked\" type=\"minus-circle\" />\n          {{ item._key }} ({{\n            new Intl.NumberFormat(\"en-US\", {\n              maximumSignificantDigits: 3,\n            }).format(item._doc_count)\n          }})</a-checkable-tag\n        ></template\n      >\n      <a-col span=\"24\">\n        <a-button\n          v-if=\"!isMobileView\"\n          type=\"primary\"\n          @click=\"showAllFilters = !showAllFilters\"\n          >Show {{ showAllFilters ? \"Less\" : \"More\" }}\n        </a-button>\n      </a-col>\n    </template>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FiltersRenderer\",\n  props: {\n    isMobileView: {\n      type: Boolean,\n      default() {\n        return false;\n      },\n    },\n    loading: Boolean,\n    aggregationData: {\n      type: Object || Array,\n      default() {\n        return [];\n      },\n    },\n    value: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    setValue: {\n      type: Function,\n      default() {\n        return () => {\n          window.console.log(\"Please provide a function\");\n        };\n      },\n    },\n    /* eslint-enable no-console */\n  },\n  data() {\n    return {\n      showAllFilters: false,\n    };\n  },\n  methods: {\n    getIngredientFilterArr(aggregationData, value) {\n      /* eslint-disable array-callback-return */\n      const responseValue = value\n        ? value.map((item) => item.toLowerCase())\n        : [];\n      const sortedFilters = [];\n      aggregationData?.data?.map((item) => {\n        if (!responseValue.includes(item._key.toLowerCase())) {\n          sortedFilters.push(item);\n        } else {\n          sortedFilters.unshift({ isChecked: true, ...item });\n        }\n      });\n\n      return sortedFilters.slice(\n        0,\n        Math.max(\n          7,\n          this.showAllFilters || this.isMobileView ? sortedFilters.length : 7\n        )\n      );\n      /* eslint-enable array-callback-return */\n    },\n    handleFilterToggle(checked, value, setValue, itemKey) {\n      let values = value || [];\n      if (!checked) {\n        values = [...values.filter((valueItem) => valueItem !== itemKey)];\n      } else {\n        values.push(itemKey);\n      }\n      // Set filter value and trigger custom query\n      setValue(values, {\n        triggerDefaultQuery: false,\n        triggerCustomQuery: true,\n        stateChanges: true,\n      });\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.filter-container {\n  margin-top: 10px;\n  display: flex;\n  flex-wrap: wrap;\n  grid-gap: 10px;\n}\n.filter-container > .ant-row {\n  width: 100%;\n  height: 200px;\n}\n\n.filter-container *.ant-tag-checkable {\n  cursor: pointer;\n  width: max-content;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  text-transform: capitalize;\n  font-size: 13px;\n  font-weight: 600;\n  border-color: rgb(90, 183, 148);\n}\n\n.filter-container .ant-col:last-child > .ant-btn {\n  font-weight: bold;\n}\n</style>\n"]}]}