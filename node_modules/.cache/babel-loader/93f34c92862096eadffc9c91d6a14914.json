{"remainingRequest":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/babel-loader/lib/index.js!/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mohdashraf/Desktop/appbase-apps/recipes-search/src/components/FiltersRenderer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/src/components/FiltersRenderer.vue","mtime":1627887036333},{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/cache-loader/dist/cjs.js","mtime":1619552968369},{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/babel-loader/lib/index.js","mtime":1619520193948},{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/cache-loader/dist/cjs.js","mtime":1619552968369},{"path":"/Users/mohdashraf/Desktop/appbase-apps/recipes-search/node_modules/vue-loader/lib/index.js","mtime":1621975511869}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvbW9oZGFzaHJhZi9EZXNrdG9wL2FwcGJhc2UtYXBwcy9yZWNpcGVzLXNlYXJjaC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvbW9oZGFzaHJhZi9EZXNrdG9wL2FwcGJhc2UtYXBwcy9yZWNpcGVzLXNlYXJjaC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkZpbHRlcnNSZW5kZXJlciIsCiAgcHJvcHM6IHsKICAgIGlzTW9iaWxlVmlldzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkaW5nOiBCb29sZWFuLAogICAgYWdncmVnYXRpb25EYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCB8fCBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIHNldFZhbHVlOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCJQbGVhc2UgcHJvdmlkZSBhIGZ1bmN0aW9uIik7CiAgICAgICAgfTsKICAgICAgfQogICAgfQogICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovCgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dBbGxGaWx0ZXJzOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEluZ3JlZGllbnRGaWx0ZXJBcnI6IGZ1bmN0aW9uIGdldEluZ3JlZGllbnRGaWx0ZXJBcnIoYWdncmVnYXRpb25EYXRhLCB2YWx1ZSkgewogICAgICB2YXIgX2FnZ3JlZ2F0aW9uRGF0YSRkYXRhOwoKICAgICAgLyogZXNsaW50LWRpc2FibGUgYXJyYXktY2FsbGJhY2stcmV0dXJuICovCiAgICAgIHZhciByZXNwb25zZVZhbHVlID0gdmFsdWUgPyB2YWx1ZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS50b0xvd2VyQ2FzZSgpOwogICAgICB9KSA6IFtdOwogICAgICB2YXIgc29ydGVkRmlsdGVycyA9IFtdOwogICAgICBhZ2dyZWdhdGlvbkRhdGEgPT09IG51bGwgfHwgYWdncmVnYXRpb25EYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FnZ3JlZ2F0aW9uRGF0YSRkYXRhID0gYWdncmVnYXRpb25EYXRhLmRhdGEpID09PSBudWxsIHx8IF9hZ2dyZWdhdGlvbkRhdGEkZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FnZ3JlZ2F0aW9uRGF0YSRkYXRhLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmICghcmVzcG9uc2VWYWx1ZS5pbmNsdWRlcyhpdGVtLl9rZXkudG9Mb3dlckNhc2UoKSkpIHsKICAgICAgICAgIHNvcnRlZEZpbHRlcnMucHVzaChpdGVtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc29ydGVkRmlsdGVycy51bnNoaWZ0KF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBpc0NoZWNrZWQ6IHRydWUKICAgICAgICAgIH0sIGl0ZW0pKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gc29ydGVkRmlsdGVycy5zbGljZSgwLCBNYXRoLm1heCg3LCB0aGlzLnNob3dBbGxGaWx0ZXJzIHx8IHRoaXMuaXNNb2JpbGVWaWV3ID8gc29ydGVkRmlsdGVycy5sZW5ndGggOiA3KSk7CiAgICAgIC8qIGVzbGludC1lbmFibGUgYXJyYXktY2FsbGJhY2stcmV0dXJuICovCiAgICB9LAogICAgaGFuZGxlRmlsdGVyVG9nZ2xlOiBmdW5jdGlvbiBoYW5kbGVGaWx0ZXJUb2dnbGUoY2hlY2tlZCwgdmFsdWUsIHNldFZhbHVlLCBpdGVtS2V5KSB7CiAgICAgIHZhciB2YWx1ZXMgPSB2YWx1ZSB8fCBbXTsKCiAgICAgIGlmICghY2hlY2tlZCkgewogICAgICAgIHZhbHVlcyA9IF90b0NvbnN1bWFibGVBcnJheSh2YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZUl0ZW0pIHsKICAgICAgICAgIHJldHVybiB2YWx1ZUl0ZW0gIT09IGl0ZW1LZXk7CiAgICAgICAgfSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhbHVlcy5wdXNoKGl0ZW1LZXkpOwogICAgICB9IC8vIFNldCBmaWx0ZXIgdmFsdWUgYW5kIHRyaWdnZXIgY3VzdG9tIHF1ZXJ5CgoKICAgICAgc2V0VmFsdWUodmFsdWVzLCB7CiAgICAgICAgdHJpZ2dlckRlZmF1bHRRdWVyeTogZmFsc2UsCiAgICAgICAgdHJpZ2dlckN1c3RvbVF1ZXJ5OiB0cnVlLAogICAgICAgIHN0YXRlQ2hhbmdlczogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["FiltersRenderer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,YAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,KAAA;AACA;AAJA,KADA;AAOA,IAAA,OAAA,EAAA,OAPA;AAQA,IAAA,eAAA,EAAA;AACA,MAAA,IAAA,EAAA,MAAA,IAAA,KADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,EAAA;AACA;AAJA,KARA;AAcA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,EAAA;AACA;AAJA,KAdA;AAoBA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,QADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,YAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,2BAAA;AACA,SAFA;AAGA;AANA;AAQA;;AA5BA,GAFA;AAgCA,EAAA,IAhCA,kBAgCA;AACA,WAAA;AACA,MAAA,cAAA,EAAA;AADA,KAAA;AAGA,GApCA;AAqCA,EAAA,OAAA,EAAA;AACA,IAAA,sBADA,kCACA,eADA,EACA,KADA,EACA;AAAA;;AACA;AACA,UAAA,aAAA,GAAA,KAAA,GACA,KAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,WAAA,EAAA;AAAA,OAAA,CADA,GAEA,EAFA;AAGA,UAAA,aAAA,GAAA,EAAA;AACA,MAAA,eAAA,SAAA,IAAA,eAAA,WAAA,qCAAA,eAAA,CAAA,IAAA,gFAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,CAAA,aAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,WAAA,EAAA,CAAA,EAAA;AACA,UAAA,aAAA,CAAA,IAAA,CAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,aAAA,CAAA,OAAA;AAAA,YAAA,SAAA,EAAA;AAAA,aAAA,IAAA;AACA;AACA,OANA;AAQA,aAAA,aAAA,CAAA,KAAA,CACA,CADA,EAEA,IAAA,CAAA,GAAA,CACA,CADA,EAEA,KAAA,cAAA,IAAA,KAAA,YAAA,GAAA,aAAA,CAAA,MAAA,GAAA,CAFA,CAFA,CAAA;AAOA;AACA,KAvBA;AAwBA,IAAA,kBAxBA,8BAwBA,OAxBA,EAwBA,KAxBA,EAwBA,QAxBA,EAwBA,OAxBA,EAwBA;AACA,UAAA,MAAA,GAAA,KAAA,IAAA,EAAA;;AACA,UAAA,CAAA,OAAA,EAAA;AACA,QAAA,MAAA,sBAAA,MAAA,CAAA,MAAA,CAAA,UAAA,SAAA;AAAA,iBAAA,SAAA,KAAA,OAAA;AAAA,SAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,OAAA;AACA,OANA,CAOA;;;AACA,MAAA,QAAA,CAAA,MAAA,EAAA;AACA,QAAA,mBAAA,EAAA,KADA;AAEA,QAAA,kBAAA,EAAA,IAFA;AAGA,QAAA,YAAA,EAAA;AAHA,OAAA,CAAA;AAKA;AArCA;AArCA,CAAA","sourcesContent":["<template>\n  <div\n    :class=\"{\n      'filter-container': true,\n    }\"\n  >\n    <!-- Spinner placeholder for loading : true -->\n    <a-row v-if=\"loading\" justify=\"center\" type=\"flex\" :gutter=\"[24, 24]\"\n      ><a-col span=\"24\">\n        <a-spin :spinning=\"loading\" size=\"large\"></a-spin> </a-col\n    ></a-row>\n\n    <!-- template for result renderer -->\n    <template v-if=\"!loading\">\n      <template\n        v-for=\"(item, index) in getIngredientFilterArr(aggregationData, value)\"\n      >\n        <a-checkable-tag\n          :key=\"index\"\n          :checked=\"value ? value.includes(item._key) : false\"\n          @change=\"\n            (checked) => handleFilterToggle(checked, value, setValue, item._key)\n          \"\n        >\n          <a-icon v-if=\"!item.isChecked\" type=\"plus-circle\" />\n          <a-icon v-if=\"item.isChecked\" type=\"minus-circle\" />\n          {{ item._key }} ({{\n            new Intl.NumberFormat(\"en-US\", {\n              maximumSignificantDigits: 3,\n            }).format(item._doc_count)\n          }})</a-checkable-tag\n        ></template\n      >\n      <a-col span=\"24\">\n        <a-button\n          v-if=\"!isMobileView\"\n          type=\"primary\"\n          @click=\"showAllFilters = !showAllFilters\"\n          >Show {{ showAllFilters ? \"Less\" : \"More\" }}\n        </a-button>\n      </a-col>\n    </template>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FiltersRenderer\",\n  props: {\n    isMobileView: {\n      type: Boolean,\n      default() {\n        return false;\n      },\n    },\n    loading: Boolean,\n    aggregationData: {\n      type: Object || Array,\n      default() {\n        return [];\n      },\n    },\n    value: {\n      type: Array,\n      default() {\n        return [];\n      },\n    },\n    setValue: {\n      type: Function,\n      default() {\n        return () => {\n          window.console.log(\"Please provide a function\");\n        };\n      },\n    },\n    /* eslint-enable no-console */\n  },\n  data() {\n    return {\n      showAllFilters: false,\n    };\n  },\n  methods: {\n    getIngredientFilterArr(aggregationData, value) {\n      /* eslint-disable array-callback-return */\n      const responseValue = value\n        ? value.map((item) => item.toLowerCase())\n        : [];\n      const sortedFilters = [];\n      aggregationData?.data?.map((item) => {\n        if (!responseValue.includes(item._key.toLowerCase())) {\n          sortedFilters.push(item);\n        } else {\n          sortedFilters.unshift({ isChecked: true, ...item });\n        }\n      });\n\n      return sortedFilters.slice(\n        0,\n        Math.max(\n          7,\n          this.showAllFilters || this.isMobileView ? sortedFilters.length : 7\n        )\n      );\n      /* eslint-enable array-callback-return */\n    },\n    handleFilterToggle(checked, value, setValue, itemKey) {\n      let values = value || [];\n      if (!checked) {\n        values = [...values.filter((valueItem) => valueItem !== itemKey)];\n      } else {\n        values.push(itemKey);\n      }\n      // Set filter value and trigger custom query\n      setValue(values, {\n        triggerDefaultQuery: false,\n        triggerCustomQuery: true,\n        stateChanges: true,\n      });\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.filter-container {\n  margin-top: 10px;\n  display: flex;\n  flex-wrap: wrap;\n  grid-gap: 10px;\n}\n.filter-container > .ant-row {\n  width: 100%;\n  height: 200px;\n}\n\n.filter-container *.ant-tag-checkable {\n  cursor: pointer;\n  width: max-content;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  text-transform: capitalize;\n  font-size: 13px;\n  font-weight: 600;\n  border-color: rgb(90, 183, 148);\n}\n\n.filter-container .ant-col:last-child > .ant-btn {\n  font-weight: bold;\n}\n</style>\n"],"sourceRoot":"src/components"}]}